# Pipeline di inferenza end-to-end

`inference/pipeline.py` coordina tutti i passaggi necessari per passare da una descrizione testuale a una scheda arricchita. La funzione `run_pipeline` accetta il testo, il knowledge pack già caricato, il percorso del modello e della label index, oltre a un opzionale calibratore di temperatura. Vengono caricati tokenizer e modello tramite `predict_category.load_classifier`, mentre `_load_id2label` recupera la corrispondenza indice→etichetta.

La pipeline esegue nell'ordine: classificazione top-k (`predict_topk`), estrazione proprietà (`predict_properties` basata sul pack), validazione regole (`robimb.registry.validate`) e rendering descrittivo (`templates.render`). Se è disponibile un calibratore salvato su disco viene ricostruito con `TemperatureCalibrator.from_state_dict` per migliorare la calibrazione delle probabilità. Il risultato finale è un dizionario JSON-friendly con categoria scelta, lista top-k, proprietà estratte, eventuali issue e descrizione generata.
